-- ZenScript UI Loader
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/WHOLEBAKERY/zenlib/refs/heads/main/zenlib"))()
local Window = Library.Window("ZenScript v1.0")

-- Services
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui", game.CoreGui)

-- Vars
local noclipConn
local safeZoneParts = {}
local savedCF
local active = false
local speedConn
local walkSpeed = 50

-- Functions
local function buildCourtyard(length,width,height)
    local walls = {}
    for i=1,4 do
        local part = Instance.new("Part")
        part.Size = (i % 2 == 0) and Vector3.new(length,height,1) or Vector3.new(1,height,width)
        part.Anchored, part.CanCollide = true, true
        part.Position = Vector3.new((i==1 and -length/2) or (i==2 and length/2) or 0,
                                    1000+height/2,
                                    (i==3 and -width/2) or (i==4 and width/2) or 0)
        part.Parent = workspace
        table.insert(walls, part)
    end
    local floor = Instance.new("Part")
    floor.Size, floor.Anchored, floor.CanCollide = Vector3.new(length,1,width), true, true
    floor.Position, floor.Parent = Vector3.new(0,999.5,0), workspace
    table.insert(walls, floor)
    safeZoneParts = walls
end

local function clearZone()
    for _,p in ipairs(safeZoneParts) do
        if p then p:Destroy() end
    end
    safeZoneParts = {}
end

-- TABS
local QuickTab = Window.CreateTab("Quick Util")
QuickTab.CreateDivider("Common Hacks")

-- Inf Jump (placeholder)
QuickTab.CreateToggle("Infinite Jump", function(state)
    print("Inf Jump placeholder: "..tostring(state))
end)

-- Attach button (placeholder)
QuickTab.CreateButton("Attach", function()
    print("Attach placeholder clicked")
end)

-- Safe Zone Toggle
QuickTab.CreateToggle("Safe Zone", function(state)
    local char = LocalPlayer.Character
    local hrp = char and char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    if state then
        savedCF = hrp.CFrame
        buildCourtyard(1000,80,25)
        hrp.CFrame = CFrame.new(0,1005,0)
        active = true
    else
        if savedCF then hrp.CFrame = savedCF end
        clearZone()
        active = false
    end
end)

-- No Clip Fixed
QuickTab.CreateToggle("No Clip", function(state)
    if state then
        if not noclipConn then
            noclipConn = RS.Stepped:Connect(function()
                if LocalPlayer.Character then
                    for _,v in pairs(LocalPlayer.Character:GetDescendants()) do
                        if v:IsA("BasePart") and v.CanCollide then
                            v.CanCollide = false
                        end
                    end
                end
            end)
        end
    else
        if noclipConn then
            noclipConn:Disconnect()
            noclipConn = nil
        end
    end
end)

-- Zenith Tab
local ZenithTab = Window.CreateTab("Zenith")
ZenithTab.CreateDivider("Core Features")

-- SuperSpeed Toggle + Slider
ZenithTab.CreateToggle("Super Speed", function(state)
    if state then
        if not speedConn then
            speedConn = RS.Stepped:Connect(function()
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                    LocalPlayer.Character.Humanoid.WalkSpeed = walkSpeed
                end
            end)
        end
    else
        if speedConn then
            speedConn:Disconnect()
            speedConn = nil
        end
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = 16 -- reset default
        end
    end
end)

ZenithTab.CreateSlider("Adjust Speed", 16, 150, function(val)
    walkSpeed = val
end)

-- Freeze button (placeholder)
ZenithTab.CreateButton("Freeze", function()
    print("Freeze placeholder clicked")
end)

-- Ink Game Tab
local InkTab = Window.CreateTab("Ink Game")
InkTab.CreateDivider("Game Utilities")

-- Teleport Button (Click anywhere once, menu stays hidden)
InkTab.CreateButton("Teleport", function()
    Library:ToggleUI() -- hide menu
    local conn
    conn = UIS.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            local mouse = LocalPlayer:GetMouse()
            if mouse.Target then
                local pos = mouse.Hit + Vector3.new(0,3,0)
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos.p)
                end
            end
            conn:Disconnect()
            -- Menu will NOT auto-open again; must toggle manually
        end
    end)
end)

-- Placeholder Teleport label
InkTab.CreateLabel("Click Teleport, then click a spot in the game world.")
